[general]
accounts = nicta
pythonfile = ~/.offlineimap.py
maxsyncaccounts = 2

[Account nicta]
localrepository = nicta-local
remoterepository = nicta-remote
status_backend = sqlite
#presynchook = ionice -c 3 chrt --idle 0 /bin/sh -c "afew --move-mails -v"
postsynchook = ionice -c 3 chrt --idle 0 /bin/sh -c "notmuch new && afew --tag --new -v -v"
autorefresh = 1
quick = 5

[Repository nicta-local]
type = Maildir
localfolders = ~/mail/nicta
nametrans = lambda folder: {'sent': 'Sent Items',
                            'inbox': 'INBOX',
                            'drafts': 'Drafts',
                            'archive':'Archive',
                            'spam':'Junk E-Mail',
                            'trash':'Deleted Items'}.get(folder, folder)

[Repository nicta-remote]
type = IMAP
remotehost = imap.nicta.com.au
remoteuser = lmccalman
remotepasseval = get_password("nicta")
remoteport = 993
ssl = yes
cert_fingerprint=8158d4d30db85635867d9b8f0db7f4b177a201cb
nametrans = lambda folder: {'Sent Items': 'sent',
                            'INBOX': 'inbox',
                            'Drafts': 'drafts',
                            'Archive': 'archive',
                            'Junk E-Mail': 'spam',
                            'Deleted Items': 'trash'
                            }.get(folder, folder)
folderfilter = lambda folder: folder in {'INBOX',
                                         'Sent Items',
                                         'Drafts',
                                         'Junk E-Mail',
                                         'Deleted Items',
                                         'Archive'}
keepalive = 60
holdconnectionopen = yes
maxconnections = 3


[mbnames]
enabled = yes
filename = ~/.mutt/mailboxes
header = "mailboxes "
peritem = "+%(accountname)s/%(foldername)s"
sep = " "
footer = "\n"
