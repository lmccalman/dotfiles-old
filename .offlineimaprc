[general]
accounts = gmail
pythonfile = ~/.offlineimap.py

[Account gmail]
localrepository = gmail-local
remoterepository = gmail-remote
status_backend = sqlite
presynchook = ionice -c 3 chrt --idle 0 /bin/sh -c "afew --move-mails"
postsynchook = ionice -c 3 chrt --idle 0 /bin/sh -c "notmuch new && afew --tag --new"

[Repository gmail-local]
type = Maildir
localfolders = ~/mail/gmail
nametrans = lambda folder: {'AllMail': '[Gmail]/All Mail',
                            'Sent': '[Gmail]/Sent Mail',
                            'Drafts': '[Gmail]/Drafts'
                            }.get(folder, folder)

[Repository gmail-remote]
type = Gmail
remoteuser = lachlan@mccalman.info
remotepass = get_password("google")
sslcacertfile = /etc/ssl/certs/ca-certificates.crt
nametrans = lambda folder: {'[Gmail]/All Mail': 'AllMail',
                            '[Gmail]/Sent Mail': 'Sent',
                            '[Gmail]/Drafts': 'Drafts'
                            }.get(folder, folder)
folderfilter = lambda folder: folder in {'[Gmail]/All Mail', 
                                         'INBOX',
                                         '[Gmail]/Sent Mail',
                                         '[Gmail]/Drafts'}
