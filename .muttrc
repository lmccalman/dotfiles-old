source ~/.mail_config/mutt/colors

set nm_default_uri="notmuch:///home/lb/mail"
set virtual_spoolfile	= yes
set sendmail="/home/lb/mail/nmsendmail"
virtual-mailboxes \
        "Gmail Inbox"     "notmuch://?query=tag:INBOX"\
        "Starred"   "notmuch://?query=tag:*"\
        "Sent"      "notmuch://?query=tag:sent"        # sets up queries for virtual folders

# normal folders
set mbox_type=Maildir
set folder="~/mail"
mailboxes =personal =nicta

# sidebar
set sidebar_width	= 35
set sidebar_visible	= yes
color sidebar_new yellow default
bind index <left> sidebar-prev
bind index <right> sidebar-next
bind index <space> sidebar-open
bind index <Esc>S sidebar-toggle

    # virtual folders
virtual-mailboxes \
 "inbox    [personal]"                "notmuch://?query=tag:inbox and tag:personal and NOT tag:archive" \
 "inbox    [NICTA]"                "notmuch://?query=tag:inbox and tag:nicta and NOT tag:archive" \
\
 "archive  [personal]" "notmuch://?query=tag:personal and tag:archive" \
 "archive  [NICTA]" "notmuch://?query=tag:nicta and tag:archive" \

macro index A "<modify-labels-then-hide>+archive -inbox\n<sync-mailbox>"
macro index I "<modify-labels-then-hide>-inbox\n<sync-mailbox>"

# # mark emails for git-am
# # (e.g. "git am -i -3 $(notmuch search --output=files tag:PATCH)"
# #
# macro index P "<modify-labels>PATCH\n"
# macro index <Esc>P "<modify-labels>-PATCH\n"
